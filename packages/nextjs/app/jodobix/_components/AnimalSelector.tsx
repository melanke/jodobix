import React from "react";
import Image from "next/image";
import { toast } from "react-hot-toast";
import { formatEther } from "viem";

interface AnimalSelectorProps {
  selectedNumber: number | null;
  onSelectNumber: (number: number) => void;
  betsPerNumber: bigint[];
  drawnNumber?: number;
}

export const AnimalSelector: React.FC<AnimalSelectorProps> = ({
  selectedNumber,
  onSelectNumber,
  betsPerNumber,
  drawnNumber,
}) => {
  return (
    <div className="grid grid-cols-5 gap-1 md:gap-2 flex-1">
      {[...Array(25)].map((_, index) => {
        const number = index + 1;
        const betAmount = betsPerNumber[index] || 0n;

        return (
          <button
            onClick={() => onSelectNumber(number)}
            key={number}
            className={`group flex flex-col items-center rounded-lg p-1 transition
              outline  
              hover:scale-125 hover:bg-secondary dark:hover:bg-[#675c47] 
              ${
                selectedNumber === number
                  ? "scale-125 bg-secondary dark:bg-[#675c47] outline-2 outline-primary"
                  : "bg-white dark:bg-[#574c3b] outline-1 outline-secondary dark:outline-none"
              }`}
          >
            <Image
              src={`/animals/${number}.webp`}
              alt={`Animal ${number}`}
              width={96}
              height={96}
              className="mix-blend-multiply group-hover:mix-blend-color-burn"
            />
            {drawnNumber === number && (
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 86 66" className="-mt-20 h-20">
                <path
                  className="fill-primary"
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M66.808 1.83301C66.808 7.04201 67.236 10.281 72.084 11.808C72.72 12.01 73.127 12.031 73.46 11.329C75.471 7.01001 73.272 1.97901 67.808 0.82901C66.986 0.65101 66.808 0.766009 66.808 1.83301ZM78.46 7.08901C81.173 9.64101 82.454 12.557 82.308 15.214C82.158 17.854 80.584 20.182 78.138 21.25C75.69 22.318 73.523 21.969 71.939 20.636C70.34 19.286 69.308 17 69.319 14.105C69.319 13.521 69.761 13.442 70.089 13.567C72.267 14.386 74.069 15.088 75.575 16.495C74.9759 13.4408 76.273 10.3386 77.2873 7.91265L77.2878 7.91134L77.2898 7.90663C77.3785 7.69441 77.4651 7.48737 77.548 7.28601C77.726 6.84301 78.179 6.82401 78.46 7.08901ZM84.299 35.291C85.138 38.922 84.575 42.057 82.975 44.187C81.387 46.296 78.788 47.354 76.158 46.88C73.527 46.405 71.918 44.911 71.345 42.921C70.767 40.916 71.178 38.438 72.799 36.041C73.127 35.556 73.537 35.739 73.742 36.025C75.09 37.91 76.199 39.498 76.674 41.504C77.8679 38.6371 80.6645 36.7817 82.8557 35.3279C83.0522 35.1975 83.2438 35.0704 83.429 34.946C83.83 34.677 84.21 34.917 84.299 35.291ZM73.502 57.223C75.861 55.99 77.71 53.395 78.507 49.755C78.589 49.375 78.345 49 77.872 49.072C77.6464 49.1057 77.4135 49.1392 77.1746 49.1735C74.5738 49.5469 71.2603 50.0226 68.956 52.098C69.388 50.088 69.071 48.176 68.659 45.889C68.596 45.547 68.305 45.208 67.8 45.504C65.309 46.978 63.871 49.041 63.538 51.098C63.199 53.145 64.013 55.182 66.185 56.733C68.357 58.29 71.164 58.452 73.502 57.223ZM42.981 65.213C44.8709 65.213 46.403 63.6809 46.403 61.791C46.403 59.9011 44.8709 58.369 42.981 58.369C41.0911 58.369 39.559 59.9011 39.559 61.791C39.559 63.6809 41.0911 65.213 42.981 65.213ZM83.527 20.229C85.616 23.318 86.226 26.443 85.496 29.005C84.777 31.548 82.73 33.469 80.105 33.974C77.48 34.479 75.444 33.662 74.193 32.016C72.933 30.349 72.422 27.891 73.069 25.074C73.203 24.5 73.646 24.522 73.944 24.715C75.882 25.991 77.486 27.074 78.652 28.772C78.7338 25.6634 80.6814 22.9208 82.2056 20.7744L82.2057 20.7741C82.3393 20.5861 82.4695 20.4027 82.595 20.224C82.871 19.829 83.313 19.912 83.527 20.229ZM59.871 65.214C62.537 65.224 65.382 63.802 67.794 60.958C68.043 60.666 68.007 60.214 67.554 60.056C67.3374 59.9799 67.1143 59.9 66.8854 59.818L66.8844 59.8176C64.4106 58.9316 61.2588 57.8028 58.256 58.556C59.58 56.979 60.193 55.145 60.897 52.932C61.007 52.599 60.908 52.162 60.319 52.187C57.434 52.323 55.199 53.473 53.934 55.135C52.685 56.786 52.445 58.963 53.638 61.354C54.83 63.745 57.231 65.203 59.871 65.214ZM7.50097 7.08901C4.78797 9.64101 3.51197 12.557 3.65697 15.214C3.80297 17.854 5.37597 20.182 7.82897 21.25C10.277 22.318 12.444 21.969 14.026 20.636C15.621 19.286 16.657 17 16.641 14.105C16.641 13.521 16.198 13.442 15.87 13.567C13.698 14.386 11.897 15.088 10.387 16.495C10.9875 13.4522 9.69837 10.3616 8.68818 7.93976C8.59482 7.71594 8.50385 7.49784 8.41697 7.28601C8.23597 6.84301 7.78197 6.82401 7.50097 7.08901ZM2.98602 44.187C1.38702 42.057 0.830019 38.922 1.66302 35.291C1.75002 34.917 2.13702 34.677 2.53202 34.946C2.71848 35.0712 2.91152 35.1991 3.10949 35.3304C5.30143 36.7838 8.09896 38.6388 9.29402 41.504C9.76102 39.498 10.87 37.91 12.22 36.025C12.428 35.739 12.835 35.556 13.163 36.041C14.783 38.438 15.194 40.916 14.616 42.921C14.043 44.911 12.439 46.405 9.80802 46.88C7.17902 47.354 4.57502 46.296 2.98602 44.187ZM7.45402 49.755C8.25602 53.395 10.105 55.99 12.46 57.223C14.804 58.452 17.606 58.29 19.777 56.733C21.954 55.182 22.761 53.145 22.427 51.098C22.089 49.041 20.657 46.978 18.167 45.504C17.662 45.208 17.37 45.547 17.307 45.889C16.896 48.176 16.574 50.088 17.005 52.098C14.7011 50.023 11.3893 49.5471 8.79111 49.1737L8.79074 49.1736C8.55168 49.1393 8.31866 49.1058 8.09302 49.072C7.62102 49 7.37002 49.375 7.45402 49.755ZM19.158 1.83301C19.158 7.04201 18.725 10.281 13.876 11.808C13.241 12.01 12.834 12.031 12.507 11.329C10.491 7.01001 12.69 1.97901 18.158 0.82901C18.975 0.65101 19.158 0.766009 19.158 1.83301ZM2.43398 20.229C0.345981 23.318 -0.258018 26.443 0.465982 29.005C1.18998 31.548 3.23698 33.469 5.86098 33.974C8.48098 34.479 10.519 33.662 11.773 32.016C13.033 30.349 13.538 27.891 12.893 25.074C12.762 24.5 12.314 24.522 12.024 24.715C10.082 25.991 8.47598 27.074 7.31498 28.772C7.22978 25.6744 5.29375 22.9403 3.77626 20.7972L3.77601 20.7969C3.63726 20.6009 3.502 20.4099 3.37198 20.224C3.09398 19.829 2.65198 19.912 2.43398 20.229ZM26.089 65.214C23.428 65.224 20.58 63.802 18.168 60.958C17.917 60.666 17.96 60.214 18.413 60.056C18.6313 59.9792 18.8561 59.8987 19.0868 59.816C21.5582 58.9302 24.7026 57.8033 27.709 58.556C26.38 56.979 25.771 55.145 25.063 52.932C24.959 52.599 25.052 52.162 25.64 52.187C28.531 52.323 30.76 53.473 32.026 55.135C33.277 56.786 33.522 58.963 32.329 61.354C31.137 63.745 28.73 65.203 26.089 65.214Z"
                />
              </svg>
            )}
            <div className="flex justify-between w-[96px] mt-0.5 flex-col md:flex-row">
              <span className="text-sm text-accent">#{number}</span>
              <span className="text-xs">{formatEther(betAmount)} ETH</span>
            </div>
          </button>
        );
      })}
    </div>
  );
};
